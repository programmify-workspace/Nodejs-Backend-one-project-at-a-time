<!-- views/index.ejs -->
<!DOCTYPE html>
<html>
<head>
  <title>CRUD with Sorting, Filtering, Pagination</title>
  <!-- Add Bootstrap CSS link -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body>
  <div class="container mt-4">
    <h1>Records List</h1>

    <style>
      /* Add a custom class for the "Create a new record" button */
      .create-record-btn {
        cursor: pointer;
      }
    
      /* Style the search box and "Create a new record" button */
      .form-inline {
        display: flex;
        align-items: center;
      }
    
      .search-input {
        flex: 1;
        margin-right: 10px;
      }
    
      .create-record-btn {
        margin-left: 10px;
      }
    </style>
    
    <!-- Search Box -->
    <form method="get" action="/records" class="form-inline mb-4">
      <input type="text" name="filter" value="<%= filterTerm %>" placeholder="Search by name or description" class="form-control mr-sm-2 search-input">
      <button type="submit" class="btn btn-primary">Search</button>
      <a class="btn btn-primary create-record-btn" href="#form">Create a new record</a>
    </form>


    <!-- Sorting Options -->
    <p>Sort By:
      <a href="/records?sortField=name&sortOrder=ASC" class="btn btn-link">Name (A-Z)</a>
      <a href="/records?sortField=name&sortOrder=DESC" class="btn btn-link">Name (Z-A)</a>
    </p>

    <table class="table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Description</th>
          <th>Action</th> <!-- Add a new column for the View button -->
        </tr>
      </thead>
      <tbody>
        <% for (const record of records) { %>
          <tr>
            <td><%= record.id %></td>
            <td><%= record.name %></td>
            <td><%= record.description %></td>
            <td>
              <!-- Add the View button with a link to the record details page -->
              <a href="/records/<%= record.id %>" class="btn btn-primary">View</a>
            </td>
            
          </tr>
        <% } %>
      </tbody>
    </table>

    <!-- Pagination Links -->
<div class="pagination mt-4 text-right">
  <% if (currentPage > 1) { %>
    <a href="/records?page=<%= currentPage - 1 %>&filter=<%= filterTerm %>" class="btn btn-primary mr-2">Previous</a>
  <% } %>
  <% if (currentPage < totalPages) { %>
    <a href="/records?page=<%= currentPage + 1 %>&filter=<%= filterTerm %>" class="btn btn-primary">Next</a>
  <% } %>
</div>


  <br><br><br>
  

    <h2>Create New Record</h2>
    <form method="post" action="/records" id="form">
      <div class="form-group">
        <label for="name">Name:</label>
        <input type="text" name="name" id="name" required class="form-control">
      </div>
      <div class="form-group">
        <label for="description">Description:</label>
        <textarea name="description" id="description" required class="form-control"></textarea>
      </div>
      <button type="submit" class="btn btn-primary">Create</button>
    </form>
  </div>

  <!-- Add Bootstrap JS and jQuery (for some Bootstrap features) -->
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.1/dist/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
